---
layout: post
published: true
title: Up Stairs
date: 2021-02-26
---

>Suppose you have precisely enough blocks to build a staircase with n steps, each $1$ block deep and tall. Given that you build rows and columns of the blocks up from the floor and out from the wall, How many distinct ways are there to build this staircase? 

[fivethirtyeight](https://fivethirtyeight.com/features/how-many-ways-can-you-build-a-staircase/).

<!--more-->

## Solution

For $n$ steps we will need $N = n(n+1)/2)$ blocks, which we will number from $1$ to $N$. For any block in the stairway, its *hook* is the L-shaped set of blocks that includes itself as well as all those later in the same row or the same column. The number of blocks in a block's hook is its hook length. The *hook length* of the block in row $i$ and column $j$ (where the first-placed block is:

$$h_{i,j} = 1 + (n - i) + (n - j)$$

In a staircase numbered in order of placement, the numbers on blocks later in rows and later in columns increase. Therefore these staircases fit the definition of *standard Young tableaux*, the number of which is given by the beautifully simple *hook length formula*:

$$ \frac{N!}{\prod_{i,j}h_{i,j}}$$

That's just the total number ways of numbering the blocks in the staircase divided by the product of all the blocks' hook lengths.

Proofs of this fact (that I have so far seen; maybe Riddler Nation will come through) are a little too complex for this context. But maybe this is a rare case in which a fallacious "proof" (due to Don Knuth) will be enough to convince you of its plausibility. Among all ways of numbering the blocks in the staircase, the odds that a given block will have the lowest number in its hook are $1$ over its hook length, and so (fallacy! why?) the number of ways of numbering staircases wherein all blocks are numbered the lowest in their hooks is the total number of numbered staircases divided by the product of hook lengths. 

The number of ways of constructing staircases increases rapidly with the number of steps:

Steps | Ways
------------
1 | 1
2 | 2
3 | 16
4 | 768
5 | 292864
6 | 1100742656
7 | 48608795688960
8 | 29258366996258488320

(I didn't know about the hook formula for Young tableaux prior to this. I generated the first few values computationally, and then went to OEIS.org, which pointed me there.)

```python
limitN = 10

def findExtensions(seq,N,counts):
	if len(seq) == N * (N+1) / 2:
		results[N]+= 1
		return
	for i in range(1,N+1):
		if counts[i] + 1 <= counts[i+1] and counts [i] + 1 <= i:
			newCounts = list(counts)
			newCounts[i] += 1
			newSeq = list(seq)
			newSeq.append(i)
			findExtensions(newSeq,N,newCounts)

results = [0]*(limitN + 1)

for N in range(1,limitN + 1):
	seq = [N]
	counts = [0]*(N) + [1,N]
	findExtensions(seq,N,counts)
	print(N,results[N])
```

<br>
